#include <stdio.h>
#include <stdlib.h>

int somme1(int **tableau, int n, int m)
{
   int i,j, somme;
   somme = 0;
   for (i=0; i < n; i++) {
      for (j=0; j < m; j++) {
         somme += tableau[i][j];
      }
   }
   return somme;
}

int somme2(int **tableau, int n, int m)
{
   int i,j, somme;
   somme = 0;
   for (j=0; j < m; j++) {
      for (i=0; i < n; i++) {
         somme += tableau[i][j];
      }
   }
   return somme;
}

int main(int argc, char const *argv[])
{
   int i, m, n, somme;
   int** tab;

   if(argc < 2)
      printf("Missing argument : you should tell which sum you would like to use (1 or 2)\n");
   
   m = n = 32768;
   tab = (int**) malloc(sizeof(int*) * m);

   for (i=0; i < n; i++)
   {
      tab[i]= (int*) malloc(sizeof(int) * n);
   }

   switch (argv[1][0])
   {
   case '1':
      somme = somme1(tab, n, m);
      break;

   case '2':
      somme = somme2(tab, n, m);
      break;
   
   default:
      printf("Wrong method\n");
      return 0;
   }

   printf("somme = %d\n", somme);

   for (i=0; i < n; i++)
   {
      free(tab[i]);
   }
   free(tab);
   return 0;
}
