#include <sys/wait.h>

#include "../include/printProcess.h"
#include "../include/gestionFichiers.h"

int main(int argc, char* argv[]){
    pid_t r;
    int fd;
    char * s;
    
    fd = open("fichierTest.txt",O_RDONLY);
    if(fd == -1){
        perror("Error on open");
        return 1;
    }

    r = fork();
    if(r == -1) {
        perror("Error on fork");
        return 2;
    }

    if(r != 0) wait(NULL);

    s = litLigne(fd);
    if(s != NULL){
        printf("Read line in fichierTest.txt : <%s>\n", s);
        free(s);
    }

    r = close(fd);
    if(r == -1) {
        perror("Error on close");
        return 3;
    }
    return 0;
}