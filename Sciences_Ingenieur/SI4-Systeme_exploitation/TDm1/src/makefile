# Makefile - Fichier make du TDm1 : Lecture/Ã©criture de fichiers & utilitaire make
# Jules LELAY

CC= gcc
CFLAGS= -O2 -Wall -ansi -pedantic
RM= /bin/rm -rf

BDIR= ../bin
IDIR= ../include
# LDIR= lib
ODIR= ../obj

_BIN= test1c test2b1 test2b2 test2b3
BIN= $(patsubst %,$(BDIR)/%,$(_BIN))

_DEP= gestionFichiers.h
DEP = $(patsubst %,$(IDIR)/%,$(_DEP))

_OBJ= gestionFichiers.o test1c.o
OBJ= $(patsubst %,$(ODIR)/%,$(_OBJ))

all: $(BIN)

obj: $(OBJ)

$(BDIR)/test1b: $(ODIR)/gestionFichiers.o $(ODIR)/test1b.o
	$(CC) -o $@ $^ $(CFLAGS)

$(BDIR)/test1c: $(ODIR)/gestionFichiers.o $(ODIR)/test1c.o
	$(CC) -o $@ $^ $(CFLAGS)

$(BDIR)/test2b1: $(ODIR)/gestionFichiers.o $(ODIR)/test2b1.o
	$(CC) -o $@ $^ $(CFLAGS)

$(BDIR)/test2b2: $(ODIR)/gestionFichiers.o $(ODIR)/test2b2.o
	$(CC) -o $@ $^ $(CFLAGS)

$(BDIR)/test2b3: $(ODIR)/gestionFichiers.o $(ODIR)/test2b3.o
	$(CC) -o $@ $^ $(CFLAGS)

$(ODIR)/%.o: %.c $(DEP)
	$(CC) -c -o $@ $< $(CFLAGS)

clean:
	$(RM) $(ODIR)/*.o

clear: clean
	$(RM) $(BDIR)/*