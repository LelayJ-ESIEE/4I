#include "../include/gestionFichiers.h"

int main(int argc, char* argv[]){
    int fdr, fdw;
    char* s;
    int i;

    if(argc < 2){
        printf("Missing argument : Please give two file paths in argument\n");
        return 2;
    }

    fdr = open(argv[1],O_RDONLY);
    if(fdr == -1){
        perror("Error on readonly open");
        return 1;
    }

    fdw = open(argv[2],O_CREAT|O_WRONLY|O_TRUNC);
    if(fdw == -1){
        perror("Error on write open");
        return 1;
    }

    s = litLigne(fdr);

    while(s != NULL){
        writeFile(fdw, s);
        writeFile(fdw, "\n");
        s = litLigne(fdr);
    }

    i = close(fdr);
    if(i == -1) {
        perror("Error on close");
        return 3;
    }

    i = close(fdw);
    if(i == -1) {
        perror("Error on close");
        return 3;
    }

    return 0;
}